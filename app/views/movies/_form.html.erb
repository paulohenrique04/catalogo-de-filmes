<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="card shadow-sm rounded-4 p-4">
        <h2 class="text-center mb-4"><%= movie.new_record? ? "Novo Filme" : "Editar Filme" %></h2>

        <%= form_with(model: movie, local: true) do |form| %>
          <% if movie.errors.any? %>
            <div class="alert alert-danger">
              <h5><%= pluralize(movie.errors.count, "erro") %> impediram que este filme fosse salvo:</h5>
              <ul class="mb-0">
                <% movie.errors.full_messages.each do |msg| %>
                  <li><%= msg %></li>
                <% end %>
              </ul>
            </div>
          <% end %>

          <div class="mb-3">
            <%= form.label :title, "Título", class: "form-label" %>
            <%= form.text_field :title, class: "form-control", placeholder: "Digite o título do filme" %>
          </div>

          <div class="mb-3">
            <%= form.label :synopsis, "Sinopse", class: "form-label" %>
            <%= form.text_area :synopsis, class: "form-control", placeholder: "Escreva a sinopse", rows: 4 %>
          </div>

          <div class="mb-3">
            <%= form.label :release_year, "Ano de Lançamento", class: "form-label" %>
            <%= form.number_field :release_year, class: "form-control", placeholder: "Ex: 2025" %>
          </div>

          <div class="mb-3">
            <%= form.label :duration, "Duração (minutos)", class: "form-label" %>
            <%= form.number_field :duration, class: "form-control", placeholder: "Duração em minutos" %>
          </div>

          <div class="mb-3">
            <%= form.label :director, "Diretor", class: "form-label" %>
            <%= form.text_field :director, class: "form-control", placeholder: "Nome do diretor" %>
          </div>

          <div class="field">
            <%= form.label :image, "Poster" %>
            <%= form.file_field :image %>
          </div>

          <div class="mb-4">
            <%= form.label :category_ids, "Categorias", class: "form-label fw-semibold" %>
            
            <div class="alert alert-light border py-2">
              <small class="text-muted">
                <i class="bi bi-mouse"></i> Segure <kbd>Ctrl</kbd> (Windows/Linux) ou <kbd>Cmd</kbd> (Mac) para selecionar múltiplas categorias
              </small>
            </div>
            
            <%= form.collection_select :category_ids, 
                Category.all.order(:name), 
                :id, 
                :name, 
                { include_blank: "Selecione as categorias..." }, 
                { 
                  multiple: true, 
                  class: "form-select",
                  size: 6
                } %>
          </div>

          <div class="d-grid">
            <%= form.submit movie.new_record? ? "Criar Filme" : "Atualizar Filme", class: "btn btn-primary btn-lg" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
